Version: 0.1
Environment:
  Name: grungeon
  Description: asdf
  Observers:
    Sprite2D:
      TileSize: 64
      BackgroundTile: blank.png
  Player:
    Observer:
      Height: 10
      Width: 10
      TrackAvatar: true
    AvatarObject: grypto
  Variables:
    - Name: slime_inventory
      InitialValue: 0
    - Name: health
      InitialValue: 100


  Levels:
    - |
      w/f   w/f  w/f  w/f  w/f  w/f  w/f  w/f  w/f  w/f  w/f  w/f  w/f  w/f  w/f
      w/f   f    f    f    f    f    f    f    f    f    f    e/f  e/f  e/f    w/f
      w/f   f    f    f    f    x/f  f    X/f  X/f  f    f    f    f    f    w/f
      w/f   f    f    f    f    f    f    X/f  X/f  f    f    x/f    f    f    w/f
      w/f   f    f    f    f    f    f    f    f    f    f    f    f    f    w/f
      w/f   f    X/f  f    f    f    f    f    f    f    f    f    f    f    w/f
      w/f   f    f    f    f    f    f    f    f    f    x/f  f    f    f    w/f
      w/f   f    f    f    f    f    f    f    f    f    f    f    f    f    w/f
      w/f   f    f    f    G/f  f    f    f    X/f  f    f    f    f    f    w/f
      w/f   f    f    f    f    f    f    f    f    f    f    f    f    f    w/f
      w/f   w/f  w/f  w/f  w/f  w/f  w/f  w/f  w/f  w/f  w/f  w/f  w/f  w/f  w/f
      

Actions:
  - Name: move
    InputMapping:
      Inputs:
        1:
          OrientationVector: [ 1, 0 ]
          VectorToDest: [ 1, 0 ]
          MetaData:
            image_idx: 0
        2:
          OrientationVector: [ 0, -1 ]
          VectorToDest: [ 0, -1 ]
          MetaData:
            image_idx: 1
        3:
          OrientationVector: [ -1, 0 ]
          VectorToDest: [ -1, 0 ]
          MetaData:
            image_idx: 2
        4:
          OrientationVector: [ 0, 1 ]
          VectorToDest: [ 0, 1 ]
          MetaData:
            image_idx: 3

    Behaviours:
      - Src:
          Object: grypto
          Commands:
            - mov: _dest
            - set_tile: meta.image_idx
        Dst:
          Object: [_empty, floor]
      - Src:
          Object: grypto
          Commands:
            - rot: _dir
            - set_tile: meta.image_idx
        Dst:
          Object: [barrel, slime_barrel, wall]

  - Name: acquire_slime
    InputMapping:
      Inputs:
        1:
          Description: slime
          VectorToDest: [ 0, -1 ]
      Relative: true
    Behaviours:
      - Src:
          Object: grypto
          Commands:
            - incr: slime_inventory
        Dst:
          Object: slime_barrel
          Commands:
            - change_to: barrel

  - Name: attack
    Behaviours:
      - Src:
          Object: grypto
        Dst:
          Object: crawler
          Commands:
            - remove: true

  - Name: hatch
    Probability: 0.5
    Trigger:
      Type: RANGE_BOX_BOUNDARY
      Range: 2
    Behaviours:
      - Dest:
          Object: egg
          Commands:
            - change_to: crawler

Objects:

  - Name: slime_barrel
    Z: 2
    MapCharacter: X
    Observers:
      Sprite2D:
        - Image: SlimeBarrel.png

  - Name: barrel
    Z: 2
    MapCharacter: x
    Observers:
      Sprite2D:
        - Image: EmptyBarrel.png

  - Name: egg
    MapCharacter: e
    Observers:
      Sprite2D:
        - Image: SlimeEgg.png

  - Name: crawler
    MapCharacter: c
    Observers:
      Sprite2D:
        - Image: tg_monsters_crawler_u1.png

  - Name: wall
    Z: 2
    MapCharacter: w
    Observers:
      Sprite2D:
        - TilingMode: WALL_16
          Image:
            - wall1-0.png
            - wall1-1.png
            - wall1-2.png
            - wall1-3.png
            - wall1-4.png
            - wall1-5.png
            - wall1-6.png
            - wall1-7.png
            - wall1-8.png
            - wall1-9.png
            - wall1-10.png
            - wall1-11.png
            - wall1-12.png
            - wall1-13.png
            - wall1-14.png
            - wall1-15.png
  - Name: grypto
    Z: 2
    MapCharacter: G
    Observers:
      Sprite2D:
        - Image: grypto_right.png
        - Image: grypto_up.png
        - Image: grypto_left.png
        - Image: grypto_down.png


  - Name: floor
    Z: 0
    MapCharacter: f
    Observers:
      Sprite2D:
        - Image: floor9-0.png
